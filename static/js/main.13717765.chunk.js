(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{10:function(e,t,n){e.exports=n(16)},15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(9),s=n.n(i),l=n(6),c=n(7),o=n(1),u=n(2),h=n(4),p=n(3),m=n(5),d=(n(15),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).setStyle=function(){var e={};if(n.props.damage&&n.props.ship){e=Object.assign(e,{backgroundColor:"#a35252"})}else if(n.props.damage){e=Object.assign(e,{backgroundColor:"rgba(0, 0, 0, .2)"})}else if(n.props.ship){e=Object.assign(e,{backgroundColor:"#8e8e8e"})}return e},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{onClick:function(t){return e.props.handleSpaceClick(t,e.props.index)},style:this.setStyle(),role:"presentation"})}}]),t}(a.Component)),f=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).setStyle=function(){var e={};if(n.props.damage&&n.props.ship){e=Object.assign(e,{backgroundColor:"#a35252"})}else if(n.props.damage){e=Object.assign(e,{backgroundColor:"rgba(0, 0, 0, .2)"})}return e},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{onClick:function(t){return e.props.handleAttack(t,e.props.index)},style:this.setStyle(),role:"presentation"})}}]),t}(a.Component),b=function(e){function t(){return Object(o.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"gameboard"},this.props.usersTurn?this.props.computer.map((function(t,n){return r.a.createElement(f,{index:n,key:n,handleAttack:e.props.handleAttack,ship:t[0],damage:t[1]})})):this.props.user.map((function(t,n){return r.a.createElement(d,{index:n,key:n,handleSpaceClick:e.props.handleSpaceClick,ship:t[0],damage:t[1]})}))))}}]),t}(a.Component),g=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(h.a)(this,Object(p.a)(t).call(this))).componentDidMount=function(){e.props.isModalOpen&&(document.body.style.overflow="hidden")},e.componentWillUnmount=function(){document.body.style.overflow="unset"},e.handleChange=function(t){e.setState({name:t.target.value})},e.handleDifficultyChange=function(t){e.setState({difficulty:t.target.value})},e.handleShipPlacementOption=function(t){e.setState({placement:t.target.value})},e.handleSubmit=function(t){t.preventDefault(),e.props.setUserSettings(e.state.name,e.state.difficulty,e.state.placement),e.setState({name:""})},e.state={name:"",difficulty:"medium",placement:"random"},e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"modal-background"},r.a.createElement("div",{className:"modal"},r.a.createElement("h1",null,"battleship"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",value:this.state.name,onChange:this.handleChange,placeholder:"name (optional)",autoFocus:!0}),r.a.createElement("p",{className:"difficulty"},r.a.createElement("b",null,"difficulty")),r.a.createElement("div",{onChange:this.handleDifficultyChange,className:"difficulty-select"},r.a.createElement("label",{style:"easy"===this.state.difficulty?v:null},"easy",r.a.createElement("input",{type:"radio",name:"difficulty",value:"easy"}),r.a.createElement("span",{className:"difficulty-radio"})),r.a.createElement("label",{style:"medium"===this.state.difficulty?v:null},"medium",r.a.createElement("input",{type:"radio",name:"difficulty",value:"medium"}),r.a.createElement("span",{className:"difficulty-radio"})),r.a.createElement("label",{style:"hard"===this.state.difficulty?v:null},"hard",r.a.createElement("input",{type:"radio",name:"difficulty",value:"hard"}),r.a.createElement("span",{className:"difficulty-radio"}))),r.a.createElement("div",null,r.a.createElement("p",{className:"placement"},r.a.createElement("b",null,"ship placement")),r.a.createElement("div",{onChange:this.handleShipPlacementOption,className:"placement-select"},r.a.createElement("label",{style:"custom"===this.state.placement?v:null},"custom",r.a.createElement("input",{type:"radio",name:"placement-select",value:"custom"}),r.a.createElement("span",{className:"placement-select"})),r.a.createElement("label",{style:"random"===this.state.placement?v:null},"random",r.a.createElement("input",{type:"radio",name:"placement-select",value:"random"}),r.a.createElement("span",{className:"placement-select"})))),r.a.createElement("button",{type:"submit"},"play")),r.a.createElement("p",{className:"about-info"},"made by austin ftacnik"," ",r.a.createElement("a",{href:"https://github.com/aplyd/battleship",target:"_blank",rel:"noopener noreferrer"},"github")," ",r.a.createElement("a",{href:"https://twitter.com/austinftacnik",target:"_blank",rel:"noopener noreferrer"},"twitter"))))}}]),t}(a.Component),v={backgroundColor:"white",color:"#808080",borderRadius:"5px",fontWeight:"bold"},k=g,y=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){n.props.isShipModalOpen&&(document.body.style.overflow="hidden")},n.componentWillUnmount=function(){document.body.style.overflow="unset"},n.handleClick=function(e){var t=e.target.dataset,a=t.shipLength,r=t.shipDirection;n.props.handleShipPlacement(a,r)},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"modal-background"},r.a.createElement("div",{className:"modal ship-select-modal"},r.a.createElement("h2",null,"select a ship to place on the map"),r.a.createElement("div",{className:"ship-selection-container"},r.a.createElement("div",{onClick:this.handleClick,className:"ship ship-v4","data-ship-length":"4","data-ship-direction":"vertical",role:"button",tabIndex:"-40",style:this.props.length4?null:S}),r.a.createElement("div",{className:"ship ship-v3","data-ship-length":"3","data-ship-direction":"vertical",onClick:this.handleClick,role:"button",tabIndex:"-41",style:this.props.length3?null:S}),r.a.createElement("div",{className:"ship ship-v2","data-ship-length":"2","data-ship-direction":"vertical",onClick:this.handleClick,role:"button",tabIndex:"-42",style:this.props.length2?null:S}),r.a.createElement("div",{className:"ship ship-h4","data-ship-length":"4","data-ship-direction":"horizontal",onClick:this.handleClick,role:"button",tabIndex:"-43",style:this.props.length4?null:S}),r.a.createElement("div",{className:"ship ship-h3","data-ship-length":"3","data-ship-direction":"horizontal",onClick:this.handleClick,role:"button",tabIndex:"-44",style:this.props.length3?null:S}),r.a.createElement("div",{className:"ship ship-h2","data-ship-length":"2","data-ship-direction":"horizontal",onClick:this.handleClick,role:"button",tabIndex:"-45",style:this.props.length2?null:S}),r.a.createElement("div",{className:"ship ship-h1","data-ship-length":"1","data-ship-direction":"horizontal",onClick:this.handleClick,role:"button",tabIndex:"-46",style:this.props.length1?null:S}))))}}]),t}(a.Component),S={backgroundColor:"rgb(0, 0, 0, 0)",pointerEvents:"none",outline:"none"},O=y,E=function(e){function t(){return Object(o.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"controls-container"},r.a.createElement("button",{className:"view-other-gameboard-btn",type:"button",onClick:this.props.flipBoard},this.props.usersTurn?"view ships":"view opponent"),r.a.createElement("div",{className:"about-control-info"},r.a.createElement("p",null,"made by austin ftacnik //"," ",r.a.createElement("a",{href:"https://github.com/aplyd/battleship",target:"_blank",rel:"noopener noreferrer"},"github")," ",r.a.createElement("a",{href:"https://twitter.com/austinftacnik",target:"_blank",rel:"noopener noreferrer"},"twitter"))),r.a.createElement("button",{className:"new-game-btn",type:"button",onClick:this.props.newGame},"new game"))}}]),t}(a.Component);function C(){for(var e=[],t=0;t<100;t++)e.push([!1,!1,0]);return e}var j=function(e){return Math.floor(Math.random()*e)};function w(){for(var e,t=Object(l.a)(Array(100)),n=["a","b","c","d","e","f","g","h","i","j"],a=0;a<10;a++)for(var r=0;r<10;r++)e=a+1,t[Number(""+a+r)]=n[r]+e.toString();return t}var N=function(e){return w()[e]},x=function(e){return w().indexOf(e)},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"c6",t=["x","x","x","a","b","c","d","e","f","g","h","i","j","x","x","x"];if(null!==e){var n,a=e[0];n=2===e.length?Number(e[1]):Number(e.slice(-2));var r=t.indexOf(a)}var i=[];i.push(t[r-1]+(n-1)),i.push(t[r]+(n-1)),i.push(t[r+1]+(n-1)),i.push(t[r-1]+n),i.push(t[r+1]+n),i.push(t[r-1]+(n+1)),i.push(t[r]+(n+1)),i.push(t[r+1]+(n+1));var s=i.filter((function(e){return!!e&&Number(e.substring(1))<=10&&Number(e.substring(1))>=1&&"x"!==e[0]}));return s},M=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"down";if(null===e)t=null;else{var a,r,i,s=["x","x","x","a","b","c","d","e","f","g","h","i","j","x","x","x"],l=e[0],c=s.indexOf(l);switch(a=2===e.length?Number(e[1]):Number(e.slice(-2)),n){case"up":t=(r=a-1)<1?null:l+r;break;case"down":case"vertical":t=(r=a+1)>10?null:l+r;break;case"left":t="x"===(i=s[c-1])?null:i+a;break;case"right":case"horizontal":t="x"===(i=s[c+1])?null:i+a;break;default:console.log("oh no, error in getNextSpace func. didnt pass up, down, left, or right")}}return t},A=function(e){var t=[],n=["up","down","left","right"][j(4)],a=N(j(100));t.unshift(a);for(var r=1;r<e;r++)t.unshift(M(t[0],n));return t};function P(){for(var e=C(),t=[4,3,3,2,2,2,1,1,1,1],n=[],a=[],r=function(e,t){var n=!1;return e.forEach((function(e){t.includes(e)&&(n=!0)})),n},i=function(e){var t=[];return e.forEach((function(e){t.push(T(e))})),Object(l.a)(new Set(t.flat()))},s=0;s<t.length;s++)for(;;){var c=A(t[s]),o=i(c);if(!c.includes(null)&&!r(n,c)&&!r(n,o)){n.push.apply(n,Object(l.a)(c)),a.push({index:s+1,length:t[s],ship:c.map((function(e){return x(e)})),surrounding:o.map((function(e){return x(e)}))});break}}return a.forEach((function(t){t.ship.forEach((function(n){e[n][2]=t.index}))})),n.forEach((function(t){e[x(t)][0]=!0})),[e,a]}var F=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){n.props.gameOver&&(document.body.style.overflow="hidden")},n.componentWillUnmount=function(){document.body.style.overflow="unset"},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"modal-background end-game-modal"},r.a.createElement("div",{className:"end-game-display",onClick:this.props.newGame,role:"presentation"},r.a.createElement("h2",null,"user"===this.props.winner?"you won":"you lost"),r.a.createElement("p",null,"(click anywhere to play again)")))}}]),t}(a.Component),I=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(h.a)(this,Object(p.a)(t).call(this))).UNSAFE_componentWillMount=function(){e.getInitialState()},e.getInitialState=function(){e.setState(e.initialState),e.setState({userShips:[]});var t=C(),n=P(),a=Object(c.a)(n,2),r=a[0],i=a[1];e.setState({user:t,computer:r,computerShips:i})},e.setUserSettings=function(t,n,a){if("custom"===a)e.setState({username:t,difficulty:n,isModalOpen:!1,isShipModalOpen:!0,placementOption:a});else if("random"===a){var r=P(),i=Object(c.a)(r,2),s=i[0],l=i[1];l.forEach((function(e){e.ship=e.ship.map((function(e){return N(e)})),e.surrounding=e.surrounding.map((function(e){return N(e)}))})),e.setState({userShips:l,user:s,username:t,difficulty:n,isModalOpen:!1,placementOption:a}),setTimeout((function(){e.setState({allShipsPlaced:!0,usersTurn:!0})}),1e3)}},e.handleSpaceClick=function(t,n){var a=Object(l.a)(e.state.user),r=e.state.userShips,i=Object(c.a)(e.state.shipToPlace,2),s=i[0],o=i[1],u=[],h=[],p=!1===a[n][0];e.state.allShipsPlaced||p&&function(){if(0!==e.state.shipToPlace.length){u.unshift(N(n));for(var t=0;t<s-1;t++)u.unshift(M(u[0],o));var r=u.map((function(e){return T(e)})),i=(h=Object(l.a)(new Set(r.flat()))).every((function(e){return!a[x(e)][0]}));return!(u.includes(null)||!i)}}()&&e.state.shipToPlace&&(r.push({index:r.length+1,length:Number(s),ship:u,surrounding:h}),u.forEach((function(e){a[x(e)][0]=!0,a[x(e)][2]=r.length})),e.setState({userShips:r,user:a,shipToPlace:[]}),10===r.length?setTimeout((function(){e.setState({allShipsPlaced:!0,usersTurn:!0})}),500):setTimeout((function(){e.setState({isShipModalOpen:!0})}),300))},e.handleShipPlacement=function(t,n){switch(Number(t)){case 4:e.setState({length4:e.state.length4-1});break;case 3:e.setState({length3:e.state.length3-1});break;case 2:e.setState({length2:e.state.length2-1});break;case 1:e.setState({length1:e.state.length1-1});break;default:console.log("error in handleShipPlacement switch")}e.setState({isShipModalOpen:!1}),e.setState({shipToPlace:[t,n]})},e.handleAttack=function(t,n){var a=Object(l.a)(e.state.computer);e.state.attackCounter<1&&!e.state.gameOver&&!1===a[n][1]&&(e.setState({attackCounter:e.state.attackCounter+1}),!0===a[n][0]?(a[n][1]=!0,e.setState({computer:a}),e.setState({attackCounter:0}),e.checkForSunkenShip(e.state.computer,a[n][2],"user"),e.checkForWinner()):(a[n][1]=!0,e.setState({computer:a}),setTimeout((function(){e.checkForWinner(),e.setState({usersTurn:!1,attackCounter:0}),e.computerAttack()}),1e3),e.checkForSunkenShip(e.state.computer,a[n][2],"user")))},e.computerAttack=function(){var t,n=Object(l.a)(e.state.user),a=e.state.computerAttackCounter,r=e.state.userShips.map((function(e){return e.ship})),i=(t=[]).concat.apply(t,Object(l.a)(r)).map((function(e){return x(e)})),s=function(){for(var t=function(){var t=j(n.length);return!1===n[t][1]&&!0===n[t][0]?(setTimeout((function(){n[t][1]=!0,e.setState({user:n})}),750),setTimeout((function(){e.checkForSunkenShip(e.state.user,n[t][2],"computer"),e.checkForWinner()}),750),setTimeout((function(){e.computerAttack()}),750),"break"):!1===n[t][1]?(setTimeout((function(){n[t][1]=!0,e.setState({user:n})}),750),setTimeout((function(){e.checkForSunkenShip(e.state.user,n[t][2],"computer"),e.checkForWinner()}),750),setTimeout((function(){e.setState({usersTurn:!0})}),1500),"break"):void 0};;){if("break"===t())break}},c=function(){for(var t=function(){var t=j(i.length);if(!1===n[i[t]][1])return n[i[t]][1]=!0,setTimeout((function(){e.setState({user:n}),e.checkForSunkenShip(e.state.user,n[i[t]][2],"computer"),e.checkForWinner()}),750),setTimeout((function(){e.computerAttack()}),750),"break"};;){if("break"===t())break}},o=function(){e.setState({computerAttackCounter:a+1})};"easy"!==e.state.difficulty||e.state.gameOver?"medium"!==e.state.difficulty||e.state.gameOver?"hard"!==e.state.difficulty||e.state.gameOver||(e.state.computerAttackCounter%2===0?(o(),c()):(o(),s())):e.state.computerAttackCounter%5===0?(o(),c()):(o(),s()):(o(),s())},e.checkForSunkenShip=function(t,n,a){if(0!==n){var r=t.filter((function(e){return e[2]===n})).every((function(e){return e[1]}));r&&"user"===a?(e.state.computerShips[n-1].surrounding.forEach((function(e){t[e][1]=!0})),e.setState({computer:t})):r&&"computer"===a&&(e.state.userShips[n-1].surrounding.forEach((function(e){t[x(e)][1]=!0})),e.setState({user:t}))}},e.checkForWinner=function(){if(!e.state.gameOver){var t=e.state,n=t.user,a=t.computer,r=n.filter((function(e){return!0===e[0]})),i=a.filter((function(e){return!0===e[0]})),s=r.every((function(e){return e[1]}));i.every((function(e){return e[1]}))?e.setState({gameOver:!0,winner:"user",isShipModalOpen:!1,isModalOpen:!1}):s&&e.setState({gameOver:!0,winner:"computer",isShipModalOpen:!1,isModalOpen:!1})}},e.displayTurnKeeper=function(){if(e.state.allShipsPlaced)return e.state.usersTurn?"<":">"},e.flipBoard=function(){e.setState({usersTurn:!e.state.usersTurn})},e.newGame=function(){e.getInitialState()},e.initialState={isModalOpen:!0,isShipModalOpen:!1,username:"",user:null,userShips:[],computer:null,computerShips:[],computerAttackCounter:0,allShipsPlaced:!1,placedShipCounter:0,usersTurn:!1,attackCounter:0,difficulty:"easy",placementOption:null,shipToPlace:[],length4:1,length3:2,length2:3,length1:4,gameOver:!1,winner:null},e.state={},e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.gameOver?r.a.createElement(F,{winner:this.state.winner,newGame:this.newGame,gameOver:this.state.gameOver}):null,this.state.isModalOpen?r.a.createElement(k,{setUserSettings:this.setUserSettings,isModalOpen:this.state.isModalOpen}):null,this.state.isShipModalOpen?r.a.createElement(O,{handleShipPlacement:this.handleShipPlacement,isShipModalOpen:this.state.isShipModalOpen,length1:this.state.length1,length2:this.state.length2,length3:this.state.length3,length4:this.state.length4}):null,r.a.createElement("div",{className:"turn-keeper"},r.a.createElement("h2",null,this.state.username?this.state.username:"you"),r.a.createElement("h2",{className:"turn-keeper-arrow"},this.displayTurnKeeper()),r.a.createElement("h2",null,"computer")),r.a.createElement("div",{id:"gameboard-container"},r.a.createElement(b,{user:this.state.user,handleSpaceClick:this.handleSpaceClick,computer:this.state.computer,usersTurn:this.state.usersTurn,handleAttack:this.handleAttack})),this.state.allShipsPlaced?r.a.createElement(E,{usersTurn:this.state.usersTurn,flipBoard:this.flipBoard,newGame:this.newGame}):null)}}]),t}(a.Component);s.a.render(r.a.createElement(I,null),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.13717765.chunk.js.map