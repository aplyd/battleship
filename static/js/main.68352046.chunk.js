(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{10:function(e,t,a){e.exports=a(16)},15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(9),s=a.n(i),l=a(6),c=a(7),u=a(1),o=a(2),h=a(4),p=a(3),m=a(5),d=(a(15),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).setStyle=function(){var e={};if(a.props.damage&&a.props.ship){e=Object.assign(e,{backgroundColor:"#a35252"})}else if(a.props.damage){e=Object.assign(e,{backgroundColor:"rgba(0, 0, 0, .2)"})}else if(a.props.ship){e=Object.assign(e,{backgroundColor:"#8e8e8e"})}return e},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{onClick:function(t){return e.props.handleSpaceClick(t,e.props.index)},style:this.setStyle(),role:"presentation"})}}]),t}(n.Component)),f=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).setStyle=function(){var e={};if(a.props.damage&&a.props.ship){e=Object.assign(e,{backgroundColor:"#a35252"})}else if(a.props.damage){e=Object.assign(e,{backgroundColor:"rgba(0, 0, 0, .2)"})}return e},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{onClick:function(t){return e.props.handleAttack(t,e.props.index)},style:this.setStyle(),role:"presentation"})}}]),t}(n.Component),b=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"gameboard"},this.props.usersTurn?this.props.computer.map((function(t,a){return r.a.createElement(f,{index:a,key:a,handleAttack:e.props.handleAttack,ship:t[0],damage:t[1]})})):this.props.user.map((function(t,a){return r.a.createElement(d,{index:a,key:a,handleSpaceClick:e.props.handleSpaceClick,ship:t[0],damage:t[1]})}))))}}]),t}(n.Component),g=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(p.a)(t).call(this))).handleChange=function(t){e.setState({name:t.target.value})},e.handleDifficultyChange=function(t){e.setState({difficulty:t.target.value})},e.handleShipPlacementOption=function(t){e.setState({placement:t.target.value})},e.handleSubmit=function(t){t.preventDefault(),e.props.setUserSettings(e.state.name,e.state.difficulty,e.state.placement),e.setState({name:""})},e.state={name:"",difficulty:"medium",placement:"random"},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"modal-background"},r.a.createElement("div",{className:"modal"},r.a.createElement("h1",null,"battleship"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",value:this.state.name,onChange:this.handleChange,placeholder:"name (optional)",autoFocus:!0}),r.a.createElement("p",{className:"difficulty"},r.a.createElement("b",null,"difficulty")),r.a.createElement("div",{onChange:this.handleDifficultyChange,className:"difficulty-select"},r.a.createElement("label",{style:"easy"===this.state.difficulty?v:null},"easy",r.a.createElement("input",{type:"radio",name:"difficulty",value:"easy"}),r.a.createElement("span",{className:"difficulty-radio"})),r.a.createElement("label",{style:"medium"===this.state.difficulty?v:null},"medium",r.a.createElement("input",{type:"radio",name:"difficulty",value:"medium"}),r.a.createElement("span",{className:"difficulty-radio"})),r.a.createElement("label",{style:"hard"===this.state.difficulty?v:null},"hard",r.a.createElement("input",{type:"radio",name:"difficulty",value:"hard"}),r.a.createElement("span",{className:"difficulty-radio"}))),r.a.createElement("div",null,r.a.createElement("p",{className:"placement"},r.a.createElement("b",null,"ship placement")),r.a.createElement("div",{onChange:this.handleShipPlacementOption,className:"placement-select"},r.a.createElement("label",{style:"custom"===this.state.placement?v:null},"custom",r.a.createElement("input",{type:"radio",name:"placement-select",value:"custom"}),r.a.createElement("span",{className:"placement-select"})),r.a.createElement("label",{style:"random"===this.state.placement?v:null},"random",r.a.createElement("input",{type:"radio",name:"placement-select",value:"random"}),r.a.createElement("span",{className:"placement-select"})))),r.a.createElement("button",{type:"submit"},"play")),r.a.createElement("p",{className:"about-info"},"made by austin ftacnik"," ",r.a.createElement("a",{href:"https://github.com/aplyd/battleship",target:"_blank",rel:"noopener noreferrer"},"github")," ",r.a.createElement("a",{href:"https://twitter.com/austinftacnik",target:"_blank",rel:"noopener noreferrer"},"twitter"))))}}]),t}(n.Component),v={backgroundColor:"white",color:"#808080",borderRadius:"5px",fontWeight:"bold"},k=g,S=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e){var t=e.target.dataset,n=t.shipLength,r=t.shipDirection;a.props.handleShipPlacement(n,r)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"modal-background"},r.a.createElement("div",{className:"modal ship-select-modal"},r.a.createElement("h2",null,"select a ship to place on the map"),r.a.createElement("div",{className:"ship-selection-container"},r.a.createElement("div",{onClick:this.handleClick,className:"ship ship-v4","data-ship-length":"4","data-ship-direction":"vertical",role:"button",tabIndex:"-40",style:this.props.length4?null:y}),r.a.createElement("div",{className:"ship ship-v3","data-ship-length":"3","data-ship-direction":"vertical",onClick:this.handleClick,role:"button",tabIndex:"-41",style:this.props.length3?null:y}),r.a.createElement("div",{className:"ship ship-v2","data-ship-length":"2","data-ship-direction":"vertical",onClick:this.handleClick,role:"button",tabIndex:"-42",style:this.props.length2?null:y}),r.a.createElement("div",{className:"ship ship-h4","data-ship-length":"4","data-ship-direction":"horizontal",onClick:this.handleClick,role:"button",tabIndex:"-43",style:this.props.length4?null:y}),r.a.createElement("div",{className:"ship ship-h3","data-ship-length":"3","data-ship-direction":"horizontal",onClick:this.handleClick,role:"button",tabIndex:"-44",style:this.props.length3?null:y}),r.a.createElement("div",{className:"ship ship-h2","data-ship-length":"2","data-ship-direction":"horizontal",onClick:this.handleClick,role:"button",tabIndex:"-45",style:this.props.length2?null:y}),r.a.createElement("div",{className:"ship ship-h1","data-ship-length":"1","data-ship-direction":"horizontal",onClick:this.handleClick,role:"button",tabIndex:"-46",style:this.props.length1?null:y}))))}}]),t}(n.Component),y={backgroundColor:"rgb(0, 0, 0, 0)",pointerEvents:"none",outline:"none"},O=S,E=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"controls-container"},r.a.createElement("button",{className:"view-other-gameboard-btn",type:"button",onClick:this.props.flipBoard},this.props.usersTurn?"view my ships":"view opponent"),r.a.createElement("button",{className:"new-game-btn",type:"button",onClick:this.props.newGame},"new game"))}}]),t}(n.Component);function C(){for(var e=[],t=0;t<100;t++)e.push([!1,!1,0]);return e}var j=function(e){return Math.floor(Math.random()*e)};function N(){for(var e,t=Object(l.a)(Array(100)),a=["a","b","c","d","e","f","g","h","i","j"],n=0;n<10;n++)for(var r=0;r<10;r++)e=n+1,t[Number(""+n+r)]=a[r]+e.toString();return t}var w=function(e){return N()[e]},x=function(e){return N().indexOf(e)},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"c6",t=["x","x","x","a","b","c","d","e","f","g","h","i","j","x","x","x"];if(null!==e){var a,n=e[0];a=2===e.length?Number(e[1]):Number(e.slice(-2));var r=t.indexOf(n)}var i=[];i.push(t[r-1]+(a-1)),i.push(t[r]+(a-1)),i.push(t[r+1]+(a-1)),i.push(t[r-1]+a),i.push(t[r+1]+a),i.push(t[r-1]+(a+1)),i.push(t[r]+(a+1)),i.push(t[r+1]+(a+1));var s=i.filter((function(e){return!!e&&Number(e.substring(1))<=10&&Number(e.substring(1))>=1&&"x"!==e[0]}));return s},A=function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"down";if(null===e)t=null;else{var n,r,i,s=["x","x","x","a","b","c","d","e","f","g","h","i","j","x","x","x"],l=e[0],c=s.indexOf(l);switch(n=2===e.length?Number(e[1]):Number(e.slice(-2)),a){case"up":t=(r=n-1)<1?null:l+r;break;case"down":case"vertical":t=(r=n+1)>10?null:l+r;break;case"left":t="x"===(i=s[c-1])?null:i+n;break;case"right":case"horizontal":t="x"===(i=s[c+1])?null:i+n;break;default:console.log("oh no, error in getNextSpace func. didnt pass up, down, left, or right")}}return t},P=function(e){var t=[],a=["up","down","left","right"][j(4)],n=w(j(100));t.unshift(n);for(var r=1;r<e;r++)t.unshift(A(t[0],a));return t};function F(){for(var e=C(),t=[4,3,3,2,2,2,1,1,1,1],a=[],n=[],r=function(e,t){var a=!1;return e.forEach((function(e){t.includes(e)&&(a=!0)})),a},i=function(e){var t=[];return e.forEach((function(e){t.push(T(e))})),Object(l.a)(new Set(t.flat()))},s=0;s<t.length;s++)for(;;){var c=P(t[s]),u=i(c);if(!c.includes(null)&&!r(a,c)&&!r(a,u)){a.push.apply(a,Object(l.a)(c)),n.push({index:s+1,length:t[s],ship:c.map((function(e){return x(e)})),surrounding:u.map((function(e){return x(e)}))});break}}return n.forEach((function(t){t.ship.forEach((function(a){e[a][2]=t.index}))})),a.forEach((function(t){e[x(t)][0]=!0})),[e,n]}var M=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"modal-background end-game-modal"},r.a.createElement("div",{className:"end-game-display",onClick:this.props.newGame,role:"presentation"},r.a.createElement("h2",null,"user"===this.props.winner?"you won":"you lost"),r.a.createElement("p",null,"(click anywhere to play again)")))}}]),t}(n.Component),I=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(p.a)(t).call(this))).UNSAFE_componentWillMount=function(){e.getInitialState()},e.getInitialState=function(){e.setState(e.initialState),e.setState({userShips:[]});var t=C(),a=F(),n=Object(c.a)(a,2),r=n[0],i=n[1];e.setState({user:t,computer:r,computerShips:i})},e.setUserSettings=function(t,a,n){if("custom"===n)e.setState({username:t,difficulty:a,isModalOpen:!1,isShipModalOpen:!0});else if("random"===n){var r=F(),i=Object(c.a)(r,2),s=i[0],l=i[1];l.forEach((function(e){e.ship.forEach((function(e){return x(e)})),e.surrounding.forEach((function(e){return x(e)}))})),e.setState({userShips:l,user:s,username:t,difficulty:a,isModalOpen:!1}),setTimeout((function(){e.setState({allShipsPlaced:!0,usersTurn:!0})}),1e3)}},e.handleSpaceClick=function(t,a){var n=Object(l.a)(e.state.user),r=e.state.userShips,i=Object(c.a)(e.state.shipToPlace,2),s=i[0],u=i[1],o=[],h=[],p=!1===n[a][0];e.state.allShipsPlaced||p&&function(){if(0!==e.state.shipToPlace.length){o.unshift(w(a));for(var t=0;t<s-1;t++)o.unshift(A(o[0],u));var r=o.map((function(e){return T(e)})),i=(h=Object(l.a)(new Set(r.flat()))).every((function(e){return!n[x(e)][0]}));return!(o.includes(null)||!i)}}()&&e.state.shipToPlace&&(r.push({index:r.length+1,length:Number(s),ship:o,surrounding:h}),o.forEach((function(e){n[x(e)][0]=!0,n[x(e)][2]=r.length})),e.setState({userShips:r,user:n,shipToPlace:[]}),10===r.length?setTimeout((function(){e.setState({allShipsPlaced:!0,usersTurn:!0})}),500):setTimeout((function(){e.setState({isShipModalOpen:!0})}),300))},e.handleShipPlacement=function(t,a){switch(Number(t)){case 4:e.setState({length4:e.state.length4-1});break;case 3:e.setState({length3:e.state.length3-1});break;case 2:e.setState({length2:e.state.length2-1});break;case 1:e.setState({length1:e.state.length1-1});break;default:console.log("error in handleShipPlacement switch")}e.setState({isShipModalOpen:!1}),e.setState({shipToPlace:[t,a]})},e.handleAttack=function(t,a){var n=Object(l.a)(e.state.computer);e.state.attackCounter<1&&!e.state.gameOver&&!1===n[a][1]&&(e.setState({attackCounter:e.state.attackCounter+1}),!0===n[a][0]?(n[a][1]=!0,e.setState({computer:n}),e.setState({attackCounter:0}),e.checkForSunkenShip(e.state.computer,n[a][2],"user"),e.checkForWinner()):(n[a][1]=!0,e.setState({computer:n}),setTimeout((function(){e.checkForWinner(),e.setState({usersTurn:!1,attackCounter:0}),e.computerAttack()}),1500),e.checkForSunkenShip(e.state.computer,n[a][2],"user")))},e.computerAttack=function(){var t,a=Object(l.a)(e.state.user),n=e.state.computerAttackCounter,r=e.state.userShips.map((function(e){return e.ship})),i=(t=[]).concat.apply(t,Object(l.a)(r)),s=function(){for(var t=function(){var t=j(a.length);return!1===a[t][1]&&!0===a[t][0]?(setTimeout((function(){a[t][1]=!0,e.setState({user:a})}),750),setTimeout((function(){e.checkForSunkenShip(e.state.user,a[t][2],"computer"),e.checkForWinner()}),750),setTimeout((function(){e.computerAttack()}),750),"break"):!1===a[t][1]?(setTimeout((function(){a[t][1]=!0,e.setState({user:a})}),750),setTimeout((function(){e.checkForSunkenShip(e.state.user,a[t][2],"computer"),e.checkForWinner()}),750),setTimeout((function(){e.setState({usersTurn:!0})}),1500),"break"):void 0};;){if("break"===t())break}},c=function(){for(var t=function(){var t=j(i.length);if(!1===a[i[t]][1])return a[i[t]][1]=!0,setTimeout((function(){e.setState({user:a}),e.checkForSunkenShip(e.state.user,a[i[t]][2],"computer"),e.checkForWinner()}),750),setTimeout((function(){e.computerAttack()}),750),"break"};;){if("break"===t())break}},u=function(){e.setState({computerAttackCounter:n+1})};"easy"!==e.state.difficulty||e.state.gameOver?"medium"!==e.state.difficulty||e.state.gameOver?"hard"!==e.state.difficulty||e.state.gameOver||(e.state.computerAttackCounter%2===0?(u(),c()):(u(),s())):e.state.computerAttackCounter%3===0?(u(),c()):(u(),s()):(u(),s())},e.checkForSunkenShip=function(t,a,n){if(0!==a){var r=t.filter((function(e){return e[2]===a})).every((function(e){return e[1]}));r&&"user"===n?(e.state.computerShips[a-1].surrounding.forEach((function(e){t[e][1]=!0})),e.setState({computer:t})):r&&"computer"===n&&(e.state.userShips[a-1].surrounding.forEach((function(e){t[e][1]=!0})),e.setState({user:t}))}},e.checkForWinner=function(){if(!e.state.gameOver){var t=e.state,a=t.user,n=t.computer,r=a.filter((function(e){return!0===e[0]})),i=n.filter((function(e){return!0===e[0]})),s=r.every((function(e){return e[1]}));i.every((function(e){return e[1]}))?e.setState({gameOver:!0,winner:"user",isShipModalOpen:!1,isModalOpen:!1}):s&&e.setState({gameOver:!0,winner:"computer",isShipModalOpen:!1,isModalOpen:!1})}},e.displayTurnKeeper=function(){if(e.state.allShipsPlaced)return e.state.usersTurn?"<":">"},e.flipBoard=function(){e.setState({usersTurn:!e.state.usersTurn})},e.newGame=function(){e.getInitialState()},e.initialState={isModalOpen:!0,isShipModalOpen:!1,username:"",user:null,userShips:[],computer:null,computerShips:[],computerAttackCounter:0,allShipsPlaced:!1,placedShipCounter:0,usersTurn:!1,attackCounter:0,difficulty:"easy",placementOption:null,shipToPlace:[],length4:1,length3:2,length2:3,length1:4,gameOver:!1,winner:null},e.state={},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.gameOver?r.a.createElement(M,{winner:this.state.winner,newGame:this.newGame}):null,this.state.isModalOpen?r.a.createElement(k,{setUserSettings:this.setUserSettings}):null,this.state.isShipModalOpen?r.a.createElement(O,{handleShipPlacement:this.handleShipPlacement,length1:this.state.length1,length2:this.state.length2,length3:this.state.length3,length4:this.state.length4}):null,r.a.createElement("div",{className:"turn-keeper"},r.a.createElement("h2",null,this.state.username?this.state.username:"player"),r.a.createElement("h2",{className:"turn-keeper-arrow"},this.displayTurnKeeper()),r.a.createElement("h2",null,"computer")),r.a.createElement("div",{id:"gameboard-container"},r.a.createElement(b,{user:this.state.user,handleSpaceClick:this.handleSpaceClick,computer:this.state.computer,usersTurn:this.state.usersTurn,handleAttack:this.handleAttack})),this.state.allShipsPlaced?r.a.createElement(E,{usersTurn:this.state.usersTurn,flipBoard:this.flipBoard,newGame:this.newGame}):null)}}]),t}(n.Component);s.a.render(r.a.createElement(I,null),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.68352046.chunk.js.map